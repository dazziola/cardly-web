(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{3700:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return r(2882)}])},7572:function(e,s,r){"use strict";r.d(s,{U:function(){return i}});let i={"auth/email-already-in-use":"Email already in use."}},2882:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return y}});var i=r(5893),a=r(7294),n=r(2175),t=r(2465),l=r(5104),o=r(7350),d=r(8420),u=r(8267),c=r(5370),h=r(3655),m=r(8911),p=r(5591),x=r(8715),g=r(9222),w=r(295),j=r(7484),f=r(75),b=r(9332),_=r(1664),S=r.n(_),N=r(7572),v=r(3349);function y(){let[e,s]=(0,a.useState)(!1),[r,_]=(0,a.useState)(""),[y,C]=(0,a.useState)(!1),[E,I]=(0,v.F_)(l.I);(0,a.useEffect)(()=>{E&&!I&&R.push("/dashboard")},[I,E]);let R=(0,b.useRouter)(),k=(0,o.p)(),T=(0,n.TA)({initialValues:{email:"",password:""},onSubmit:e=>{q(e)},validate:e=>{let s={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(s.email="Invalid email address"):s.email="Required",e.password?e.password.length<6&&(s.password="Password too short. Must be at least 6 characters long."):s.password="Required",s}}),q=async e=>{try{C(!0);let s=await (0,t.e5)(l.I,e.email,e.password);s.user,console.log(s),C(!1),R.push("/dashboard"),console.log("sending",e)}catch(e){console.error("sending",e),_(e.message),C(!1),k({title:"There was an error logging in.",description:N.U[e.code],status:"error",duration:5e3,isClosable:!0,position:"bottom-right"})}};return(0,i.jsx)("form",{onSubmit:T.handleSubmit,children:(0,i.jsxs)(d.K,{spacing:5,children:[(0,i.jsxs)(u.NI,{id:"email",isRequired:!0,children:[(0,i.jsx)(c.l,{children:"Email"}),(0,i.jsx)(h.I,{id:"email",name:"email",type:"text",onChange:T.handleChange,value:T.values.email,disabled:y}),T.errors.email&&T.touched.email&&(0,i.jsx)(m.x,{fontSize:"sm",color:"red.500",children:T.errors.email})]}),(0,i.jsxs)(u.NI,{id:"password",isRequired:!0,children:[(0,i.jsx)(c.l,{children:"Password"}),(0,i.jsxs)(p.B,{children:[(0,i.jsx)(h.I,{id:"password",name:"password",onChange:T.handleChange,value:T.values.password,type:e?"text":"password",disabled:y}),(0,i.jsx)(x.x,{h:"full",children:(0,i.jsx)(g.z,{disabled:y,variant:"ghost",onClick:()=>s(e=>!e),children:e?(0,i.jsx)(j.O,{}):(0,i.jsx)(f.t,{})})})]}),T.errors.password&&T.touched.password&&(0,i.jsx)(m.x,{fontSize:"sm",color:"red.500",children:T.errors.password})]}),(0,i.jsx)(d.K,{spacing:10,pt:2,children:(0,i.jsx)(g.z,{loadingText:"Submitting",colorScheme:"brand",type:"submit",disabled:y,rightIcon:y?(0,i.jsx)(w.$,{}):(0,i.jsx)(i.Fragment,{}),children:"Login"})}),(0,i.jsx)(d.K,{pt:6,children:(0,i.jsxs)(m.x,{align:"center",children:["Not yet a user?"," ",(0,i.jsx)(S(),{color:"blue.400",className:"underline",href:"/register",children:"Register"})]})})]})})}}},function(e){e.O(0,[363,774,888,179],function(){return e(e.s=3700)}),_N_E=e.O()}]);